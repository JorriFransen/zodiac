
#import "print.zc"

#run main();
main :: () {

    str := "abc, %i\n";
    printf(str.data, 55);
    println();

    print_func("Hello!");
    println();

    print_func("Hello!", "World", 42);
    println();

    args_arr: [4]Any;
    args_arr[0] = 257;
    args_arr[1] = 2.3;
    args_arr[2] = "xyz";
    args_arr[3] = 42;

    print_func("Prepared args_arr: ", args_arr);
    println();

    args : []Any = args_arr;

    print_func("Prepared args: ", args_arr);
    println();

    print_func("Spread args_arr: ", ..args_arr);
    println();

    print_func("Spread args: ", ..args);
    println();

    args.length -= 1;
    args.data = *args[1];

    print_func("Spread args (modified): ", ..args);
    println();

    return 0;

}

print_func :: (fmt: String, args: ..) -> void {
    println("fmt: \"", fmt, "\"");
    print("args: ");

    for i := 0; i < args.length; i += 1 {
        if i > 0 print(", ");
        print_any(args[i]);
    }

    println();
}

#foreign printf :: (cstr: *u8, args: ..) -> s32;

